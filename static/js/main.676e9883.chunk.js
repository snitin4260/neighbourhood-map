(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){},15:function(e,n,t){},19:function(e,n,t){},21:function(e,n,t){"use strict";t.r(n);var o=t(0),i=t.n(o),a=t(7),r=t.n(a),s=(t(13),t(1)),l=t(2),c=t(4),u=t(3),d=t(5);t(15);var h=function(){return new Promise(function(e,n){window.resolveGoogleMapsPromise=function(){e(window.google),console.log("inside promise"),delete window.resolveGoogleMapsPromise};var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=places&key=".concat("AIzaSyDOS3gAaYOUVX9N38VpLaq83f0rBOqdnjs","&callback=resolveGoogleMapsPromise"),t.async=!0,document.body.appendChild(t)})};var f=function(){var e="https://api.foursquare.com/v2/venues/explore?near=".concat("Sydney","&query=").concat("food","&client_id=").concat("1AFXV1IRQN4EEHGVWMRRHBHXW5FRNUVNGVVPMT3ZMVDJ2G5O","&client_secret=").concat("XQENZ00BUK5KVM43NRHVFZYPXPOATFKFAVR4VHJLIBJBFTR3","&v=").concat("20181125");return fetch(e)},p=(t(17),function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(c.a)(this,Object(u.a)(n).call(this,e))).textInput=i.a.createRef(),t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n="hide";return this.props.visible&&(n="show"),i.a.createElement("div",{id:"sidebar","aria-hidden":String(!this.props.visible),className:n},i.a.createElement("div",{id:"close",tabIndex:"0",onMouseDown:this.props.handleMouseDown,onKeyDown:this.props.closeKeyEnter},i.a.createElement("button",null," ",i.a.createElement("i",{className:"fa fa-window-close fa-3x"}," "))),i.a.createElement("input",{id:"filter-input",tabIndex:"0",role:"search",value:this.props.query,placeholder:"Filter Hotels",onChange:function(n){e.props.changeQuery(n.target.value)}})," ",i.a.createElement("i",{className:"fa fa-filter fa-2x  "}),this.props.filteredHotels&&this.props.filteredHotels.length>0&&this.props.filteredHotels.map(function(n,t){return i.a.createElement("div",{key:t,tabIndex:"0",className:"sidebar-item",onClick:function(){e.props.showMarker(n)},onKeyDown:function(t){e.props.listItemEnter(t,n)}}," ",n.venue.name," ")})," ")}}]),n}(o.Component)),m=(t(19),function(e){function n(){return Object(s.a)(this,n),Object(c.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=String(this.props.visible);return i.a.createElement("button",{tabIndex:"0","aria-hidden":e,id:"roundButton",onMouseDown:this.props.handleMouseDown,onKeyDown:this.props.hambKeyPress}," ")}}]),n}(o.Component)),v=function(e){function n(){var e,t;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i)))).state={query:"",filteredHotels:[],visible:!1},t.changeQuery=function(e){t.setState({query:e.trim()},t.filterHotels)},t.toggleMenu=function(){t.setState({visible:!t.state.visible})},t.handleMouseDown=function(e){t.toggleMenu()},t.showMarker=function(e){var n=t.markers.filter(function(n){return n.id===e.venue.id});t.infoWindow.marker=n[0],t.infoWindow.setContent("<div>".concat(n[0].title,"<br><p>").concat(n[0].address,"</p></div>")),t.infoWindow.open(t.map,n[0]),null!==n[0].getAnimation()?n[0].setAnimation(null):n[0].setAnimation(t.google.maps.Animation.BOUNCE),setTimeout(function(){n[0].setAnimation(null)},400)},t.closeKeyEnter=function(e){13===(e.keyCode||e.which)&&t.handleMouseDown()},t.listItemEnter=function(e,n){13===(e.keyCode||e.which)&&t.showMarker(n)},t.hambKeyPress=function(e){console.log(e.target),13===(e.keyCode||e.which)&&t.handleMouseDown()},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([h(),f()]).then(function(n){var t=n[0],o=n[1].json();e.google=t;var i=new t.maps.InfoWindow;e.infoWindow=i,e.bounds=new t.maps.LatLngBounds,e.markers=[],o.then(function(e){return e.response.groups[0].items}).then(function(n){e.map=new t.maps.Map(document.getElementById("map"),{zoom:11,center:{lat:n[0].venue.location.lat,lng:n[0].venue.location.lng}}),e.allhotels=n,e.setState({filteredHotels:e.allhotels}),n.forEach(function(n){console.log(n.venue.location.formattedAddress);var a=new t.maps.Marker({map:e.map,position:{lat:n.venue.location.lat,lng:n.venue.location.lng},title:n.venue.name,animation:t.maps.Animation.DROP,id:n.venue.id,address:n.venue.location.formattedAddress});e.bounds.extend(a.position);var r=e;e.markers.push(a),a.addListener("click",function(){o(this,i),null!==a.getAnimation()?a.setAnimation(null):a.setAnimation(r.google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},400)})}),e.map.fitBounds(e.bounds);var o=function(n,t){t.marker!==n&&(t.marker=n,t.setContent("<div>".concat(n.title,"<br><p></p>").concat(n.address.join(" "),"</p></div>")),t.open(e.map,n),t.addListener("closeclick",function(){t.close()}))}})}).catch(function(e){alert(e)})}},{key:"filterHotels",value:function(){var e=this;this.infoWindow.close();var n=this.allhotels.filter(function(n){return n.venue.name.toLowerCase().includes(e.state.query.toLowerCase())});this.setState({filteredHotels:n}),this.markers.forEach(function(n){var t=e.state.query.toLowerCase();n.title.toLowerCase().includes(t)?n.setVisible(!0):n.setVisible(!1)})}},{key:"render",value:function(){return i.a.createElement("main",null,i.a.createElement("header",{id:"header",role:"banner"},i.a.createElement("h1",null,"Neighbourhood Map")),i.a.createElement("div",{id:"map","aria-label":"location",role:"application"}," "),i.a.createElement(m,{handleMouseDown:this.handleMouseDown,visible:this.state.visible,hambKeyPress:this.hambKeyPress}),i.a.createElement(p,{value:this.state.query,changeQuery:this.changeQuery,filteredHotels:this.state.filteredHotels,showMarker:this.showMarker,visible:this.state.visible,handleMouseDown:this.handleMouseDown,closeKeyEnter:this.closeKeyEnter,listItemEnter:this.listItemEnter}))}}]),n}(o.Component),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(v,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("","/service-worker.js");w?(function(e,n){fetch(e).then(function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):g(n,e)})}}()},8:function(e,n,t){e.exports=t(21)}},[[8,2,1]]]);
//# sourceMappingURL=main.676e9883.chunk.js.map